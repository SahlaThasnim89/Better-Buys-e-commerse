<%- include('../layouts/userHeader') %>



    <!-- Modal address change-->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog d-flex justify-content-center">
            <div class="modal-content" style="width: 44rem;">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row col-md-12">
                        <!-- <div class="p-4 border-top "> -->
                        <h5 class="font-size-14 mt-3 mb-3 d-flex justify-content-center">Shipping Info</h5>
                        <!-- <div class="row col-md-12 d-flex"> -->
                        <% if (id && id.address && id.address.length> 0) { %>
                            <% for(let i=0;i<id.address.length;i++){ %>
                                <% if(id.address[i].status===false){ %>



                                    <div onclick="selectAddress('<%=id.address[i]._id%>')" data-bs-dismiss="modal"
                                        class="col-lg-12 col-sm-12 col-md-12 d-flex justify-content-center">
                                        <div class="card border rounded active shipping-address mb-4"
                                            style="border-radius: 0 !important;">
                                            <div class="card-body col-md-12">
                                                <div class="d-flex ">
                                                    <div class="d-flex">
                                                        <h5 class="font-size-14 mb-4 mr-auto p-2">Address </h5>
                                                        <div class="Place-order" id="staticBackdrop"
                                                            style="padding-left: 21rem">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <a href="#" data-bs-toggle="modal"
                                                            data-bs-target="#exampleModall" class="float-end ms-1"
                                                            data-bs-toggle="tooltip" data-placement="top"
                                                            id="addresseditbutton"
                                                            onclick="editAddress('<%= id.address[i]._id%>')"
                                                            title="Edit">
                                                            <i class="bx bx-pencil font-size-16"></i>
                                                            <i class="ri-edit-box-fill"></i>
                                                        </a>
                                                    </div>

                                                    <div>
                                                        <a href="#" data-bs-toggle="modal" data-bs-target="#example"
                                                            class="float-end ms-1" data-bs-toggle="tooltip"
                                                            data-placement="top" id="deletebutton"
                                                            onclick="deleteAddress('<%=id.address[i]._id%>')"
                                                            title="Delete">
                                                            <i class="ri-delete-bin-6-fill p-2"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                <p><strong>
                                                        <%=id.address[i].name %>
                                                    </strong>, <%=id.address[i].mobile %>
                                                </p>

                                                <h5 class="font-size-14">
                                                    <%=id.address[i].addressData %>
                                                </h5>
                                                <p class="mb-1">
                                                    <%=id.address[i].locality %>, <%=id.address[i].city %>,
                                                            <%=id.address[i].state %>
                                                </p>



                                            </div>
                                        </div>

                                    </div>
                                    <% } %>
                                        <% } %>
                                            <% } %>



                                                <!-- </div> -->
                    </div>
                </div>

            </div>
        </div>
    </div>



    <!-- modal address edit -->
    <div class="modal fade" id="exampleModall" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog d-flex justify-content-center" style="width: 160vw;">
            <div class="modal-content d-flex justify-content-center" style="width: 600px;">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <!-- <div class="tab-pane fade" id="account-info" role="tabpanel"> -->
                    <div class="myaccount-content p-4">
                        <div class="account-details-form">
                            <form action="/update" method="post">

                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="single-input-item">
                                            <label for="first-name" class="required" placeholder="Enter name">Name
                                                <span>*</span></label>
                                            <input type="text" id="name" onkeyup="editName(this)" name="name" required />
                                            <span id="firstNameError" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required" placeholder="Enter Phone no.">Mobile
                                                Number <span>*</span></label>
                                            <input type="number" id="mobile" onkeyup="editMobile(this)" name="mobile" required pattern="[0-9]{10}"
                                                title="Please enter a 10-digit mobile number" />
                                                <span id="mobileError" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required" placeholder="Enter email">email
                                                <span>*</span></label>
                                            <input type="email" id="email" onkeyup="editEmail(this)" name="email" pattern="^[A-Za-z0-9.%+\\-]+@gmail\.com$" required
                                                title="Please enter a valid email address" />
                                                <span id="emailError" style="color: red;"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="first-name" class="required"
                                                placeholder="Enter Postal code">Pincode <span>*</span></label>
                                            <input type="number " id="pincode" onkeyup="editPin(this)" name="pincode" required
                                                pattern="[0-9]{6}" title="Please enter a 6-digit pincode" />
                                                <span id="pinError" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required">Locality <span>*</span></label>
                                            <input type="text" id="locality" onkeyup="editLocal(this)" name="locality" required />
                                            <span id="localError" style="color: red;"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="single-input-item">
                                    <label for="display-name" class="required">Address <span>*</span></label>
                                    <textarea onkeyup="editAddress(this)" type="text" id="address" rows="3" placeholder="Enter full address"
                                        name="address" required></textarea>
                                        <span id="addressError" style="color: red;"></span>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="first-name" class="required" placeholder="Enter City">City
                                                <span>*</span></label>
                                            <input type="text" id="city" onkeyup="editCity(this)" name="city" required />
                                            <span id="cityError" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required">State <span>*</span></label>
                                            <input type="text" id="state"  onkeyup="editState(this)"  name="state" required />
                                            <span id="stateError" style="color: red;"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="single-input-item">
                                    <a href="/checkOut"><button class="check-btn sqr-btn ">Cancel</button></a>
                                    <button class="check-btn sqr-btn" id="submitBtn" type="submit">Edit address</button>
                                </div>
                                <input type="hidden" id="id" name="id">

                            </form>





                        </div>
                    </div>
                    <!-- </div> -->
                </div>

            </div>
        </div>
    </div>

    <!-- modal for add address -->


    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog d-flex justify-content-center" style="width: 160vw;">
            <div class="modal-content d-flex justify-content-center" style="width: 600px;">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <!-- <div class="tab-pane fade" id="account-info" role="tabpanel"> -->
                    <div class="myaccount-content p-4">
                        <div class="account-details-form">
                            <form action="/addAddress" method="post" id="registerForm">

                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="single-input-item">
                                            <label for="first-name" class="required" placeholder="Enter name">Name
                                                <span>*</span></label>
                                            <input type="text" id="firstName1" onkeyup="addName(this)" name="name" required />
                                            <span id="firstNameError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required" placeholder="Enter Phone no.">Mobile
                                                Number <span>*</span></label>
                                            <input type="text" id="mobile1" onkeyup="addMobile(this)" name="mobile" required pattern="[0-9]{10}"
                                                title="Please enter a 10-digit mobile number" />
                                            <span id="mobileError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required" placeholder="Enter email">email
                                                <span>*</span></label>
                                            <input type="text" id="email1" onkeyup="addMail(this)" name="email" required
                                                pattern="^[A-Za-z0-9.%+-]+@gmail\.com$"
                                                title="Please enter a valid email address" />
                                            <span id="emailError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="first-name" class="required" placeholder="Enter Postal code">Zip
                                                Number <span>*</span></label>
                                            <input type="text" id="pincode1" onkeyup="addPin(this)" name="pincode" required pattern="[0-9]{6}"
                                                title="Please enter a 6-digit pincode" />
                                            <span id="pinError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required">Locality <span>*</span></label>
                                            <input type="text" onkeyup="addLocal(this)" id="locality1" name="locality" required />
                                            <span id="localError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="single-input-item">
                                    <label for="display-name" class="required">Address <span>*</span></label>
                                    <textarea onkeyup="addAddress(this)" type="text" id="address1" rows="3" placeholder="Enter full address"
                                        id="address1" name="address" required></textarea>
                                    <span id="addressError1" style="color: red;"></span>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="first-name" class="required" placeholder="Enter City">City
                                                <span>*</span></label>
                                            <input type="text" name="city" onkeyup="addCity(this)" id="city1" required />
                                            <span id="cityError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="single-input-item">
                                            <label for="last-name" class="required">State <span>*</span></label>
                                            <input type="text" id="state1" onkeyup="addState(this)" name="state" required />
                                            <span id="stateError1" style="color: red;"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="single-input-item">
                                    <a href="/myAccount"><button class="check-btn sqr-btn ">Cancel</button></a>
                                    <button class="check-btn sqr-btn " id="submitBtn1" type="submit">Add address</button>
                                </div>

                            </form>





                        </div>
                    </div>
                    <!-- </div> -->
                </div>

            </div>
        </div>
    </div>






    <div class="main-wrapper">


        <!-- search start -->

        <!-- mini cart start -->

        <!-- aside start -->

        <div class="breadcrumb-area section-padding-1 bg-gray breadcrumb-ptb-1">
            <div class="container-fluid">
                <div class="breadcrumb-content text-center">
                    <div class="breadcrumb-title">
                        <h2>Checkout</h2>
                    </div>
                    <ul>
                        <li>
                            <a href="/">Home </a>
                        </li>
                        <li><span> &gt; </span></li>
                        <li class="active">Checkout </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- checkout start -->
        <div class="checkout-main-area pt-100 pb-100">
            <div class="container">
                <div class="customer-zone mb-30">
                    <p class="cart-page-title">Have a coupon? <a class="checkout-click">Click here to enter your
                            code</a></p>
                    <div class="checkout-login-info">
                        <p>If you have a coupon code, please apply it below.</p>
                        <div class="d-flex">
                            <div class="col-md-6">
                                <input class="coupen" type="text" name="coupen" placeholder="Coupon code"
                                    id="couponInput">
                                <% locals.msg %>
                            </div>

                            <div class="col-md-1"></div>
                            <!-- <input class="coupen" type="text" name="coupen" placeholder="Coupon code"> -->
                            <div class="col-md-2">
                                <input class="bg-black text-white" id="couponButton" type="submit" onclick="apply()"
                                    value="Apply Coupon">

                            </div>
                        </div>


                    </div>
                </div>
                <div class="checkout-wrap">
                    <div class="row">
                        <div class="col-lg-7">
                            <div class="billing-info-wrap mr-100">
                                <h3>Billing Details</h3>
                                <% if (!locals.id || !locals.id.address || locals.id.address.length===0) { %>


                                    <form action="/billingAddress" method="post" id="registerForm">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12">
                                                <div class="billing-info mb-25">
                                                    <label>Full Name <abbr class="required"
                                                            title="required">*</abbr></label>
                                                    <input type="text" name="name" id="name3" required>
                                                    <span id="firstNameError3" style="color: red;"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12">
                                                <div class="billing-info mb-25">
                                                    <label>Mobile Number <abbr class="required"
                                                            title="required">*</abbr></label>
                                                    <input type="number" name="mobile" id="mobile3"
                                                        pattern="[0-9]{10}"
                                                        title="Please enter a 10-digit mobile number" required>
                                                    <span id="mobileError3" style="color: red;"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-md-12">
                                                <div class="billing-info mb-25">
                                                    <label>Email <abbr class="required"
                                                            title="required">*</abbr></label>
                                                    <input type="email" name="email" id="email3"
                                                        pattern="^[A-Za-z0-9.%+-]+@gmail\.com$"
                                                        title="Please enter a valid email address" required>
                                                    <span id="emailError3" style="color: red;"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                                <div class="billing-info mb-25">
                                                    <label>Pincode <abbr class="required"
                                                            title="required">*</abbr></label>
                                                    <input type="text" name="pincode" id="pincode3"
                                                        pattern="[0-9]{6}" title="Please enter a 6-digit pincode" required>
                                                        <span id="pinError3" style="color: red;"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                                <div class="billing-info mb-25">
                                                    <label>Locality <abbr class="required"
                                                            title="required">*</abbr></label>
                                                    <input type="text" name="locality" id="locality3" required>
                                                    <span id="localError3" style="color: red;"></span>
                                                </div>
                                            </div>
                                            <div class="additional-info-wrap">
                                                <label>Address</label>
                                                <textarea placeholder="Enter your address here. " name="address" id="address3"
                                                    required></textarea>
                                                    <span id="addressError3" style="color: red;"></span>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="billing-info mb-25">
                                                    <label>City <abbr class="required" title="required">*</abbr></label>
                                                    <input type="text" name="city" id="city3" required>
                                                </div>
                                                <span id="cityError3" style="color: red;"></span>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="billing-select mb-25">
                                                    <label>State <abbr class="required"
                                                            title="required">*</abbr></label>
                                                    <select class="select-active" name="state" required>
                                                        <option>Kerala</option>
                                                        <option>Karnataka</option>
                                                        <option>Maharashtra</option>
                                                        <option>Tamii Nadu</option>
                                                        <option>Delhi</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="Place-order mt-30">
                                                <input class="bg-dark text-white" id="submitBtn3" type="submit"
                                                    style="height: 4rem;" value="Save and Deliver Here">
                                            </div>
                                        </div>
                                    </form>
                                    <%}else{%>

                                        <!-- <div class="row col-md-"> -->
                                        <div class="col-lg-12">
                                            <!-- <div class="p-4 border-top ">  -->
                                            <h5 class="font-size-14 mb-30">Shipping Info</h5>






                                            <% for(let i=0;i<id.address.length;i++){ %>


                                                <% if(id.address[i].status===true){%>
                                                    <div class="col-lg-12 col-sm-12 col-md-12"
                                                        id="<%=id.address[i]._id  %>">
                                                        <div class="card border rounded active shipping-address mb-4"
                                                            style="border-radius: 0 !important;">
                                                            <div class="card-body col-md-12 ">
                                                                <div class="d-flex d-flex justify-content-sm-between ">
                                                                    <div class="d-flex">
                                                                        <h5 class="font-size-14 mb-4 mr-auto p-2">
                                                                            Address </h5>

                                                                    </div>

                                                                    <div>
                                                                        <!-- <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModall" class="float-end ms-1" data-bs-toggle="tooltip" data-placement="top" id="addresseditbutton" onclick="editAddress('<%= id.address[i]._id%>')" title="Edit"> -->
                                                                        <i class="bx bx-pencil font-size-16"></i>
                                                                        <i class="ri-edit-box-fill"></i>
                                                                        <a href=""
                                                                            onclick="editAddress('<%= id.address[i]._id%>')"
                                                                            title="Edit" data-bs-toggle="modal"
                                                                            data-bs-target="#exampleModall"
                                                                            class="float-end ms-1"
                                                                            data-bs-toggle="tooltip"
                                                                            data-placement="top"
                                                                            id="addresseditbutton"><strong>Edit</strong></a>

                                                                        </a>
                                                                        <a href="#" data-bs-toggle="modal"
                                                                            data-bs-target="#example"
                                                                            class="float-end ms-1"
                                                                            data-bs-toggle="tooltip"
                                                                            data-placement="top" id="deletebutton"
                                                                            onclick="deleteAddress('<%=id.address[i]._id%>')"
                                                                            title="Delete">
                                                                            <i class="ri-delete-bin-6-fill p-2"></i>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                                <p><strong>
                                                                        <%=id.address[i].name %>
                                                                    </strong>, <%=id.address[i].mobile %>
                                                                </p>
                                                                <h5 class="font-size-14">
                                                                    <%=id.address[i].addressData %>
                                                                </h5>
                                                                <p class="mb-1">
                                                                    <%=id.address[i].locality %>, <%=id.address[i].city
                                                                            %>, <%=id.address[i].state %>- <%=id.address[i].pincode %>
                                                                </p>
                                                                <br>


                                                            </div>
                                                        </div>
                                                        <div class="Place-order mt-30">
                                                            <button type="submit" id="submitBtn"
                                                                class="btn btn-dark rounded-0" data-bs-toggle="modal"
                                                                data-bs-target="#staticBackdrop">Change</button>
                                                            <button type="submit" id="submitBtn"
                                                                class="btn btn-dark rounded-0" data-bs-toggle="modal"
                                                                data-bs-target="#exampleModal">Add Address</button>


                                                        </div>
                                                        <br>
                                                        <br>
                                                        <!-- if wallet amount -->
                                                       <% if(wallet){%>
                                                        <% if(wallet?.balance>0) {%>
                                                            <h3>Wallet Details</h3>
                                                            <div class="card border rounded active shipping-address mb-4"
                                                                style="border-radius: 0 !important;">
                                                                <div class="card-body col-md-12 ">
                                                                    <div
                                                                        class="d-flex d-flex justify-content-sm-between ">
                                                                        <div class="d-flex">
                                                                            <h4 class="font-size-14 mb-4 mr-auto p-2">
                                                                                wallet Balance:<strong
                                                                                    style="color: red;"> ₹
                                                                                    <%=wallet?.balance %>
                                                                                </strong></h4>

                                                                        </div>

                                                                        <div>
                                                                            <!-- <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModall" class="float-end ms-1" data-bs-toggle="tooltip" data-placement="top" id="addresseditbutton" onclick="editAddress('<%= id.address[i]._id%>')" title="Edit"> -->
                                                                            <!-- <i class="bx bx-pencil font-size-16"></i>
                                                        <i class="ri-edit-box-fill"></i> -->

                                                                            </a>
                                                                            <!-- <a href="#" data-bs-toggle="modal" data-bs-target="#example" class="float-end ms-1" data-bs-toggle="tooltip" data-placement="top" id="deletebutton" onclick="deleteAddress('<%=id.address[i]._id%>')" title="Delete">
                                                        <i class="ri-delete-bin-6-fill p-2" ></i> -->
                                                                            </a>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <% }else{%>
                                                                <input type="hidden" name="">
                                                                <%} %>
                                                                <%} %>
                                                    </div>
                                        </div>
                                        <% } %>
                                            <% } %>


                                                <% } %>
                                                <!-- <a class="d-flex justify-content-start pb-60" href="/shop"><button class="btn btn-dark text-white rounded-0  !important">Shop More</button></a> -->




                            </div>




                        </div>
                        <div class="col-lg-5">
                            <form action="/order" id="orderForm" method="post">
                                <div class="your-order-area">
                                    <h3>Your order</h3>
                                    <div class="your-order-wrap gray-bg-4">
                                        <div class="your-order-info-wrap">
                                            <div class="your-order-info">
                                                <ul>
                                                    <li>Product <span>Total</span></li>
                                                </ul>
                                            </div>
                                            <div class="your-order-middle">
                                                <ul>


                                                    <% let checkTotal=0 %>
                                                        <% let Total=0 %>
                                                        <% let isStock = false; %>
                                                            <% check.products.forEach(value=>{%>
                                                                <% checkTotal=value.productId.OfferPrice*value.quantity
                                                                    %>
                                                                    <% Total+=checkTotal %>
                                                                        <li>
                                                                            <%=value.productId.Name %> X
                                                                                <%=value.quantity%> <span>₹
                                                                                        <%=parseInt(checkTotal) %>
                                                                                    </span>
                                                                        </li>
                                                                        <% if (value.productId.Quantity < value.quantity) { %>
                                                                            <% isStock = true; %>
                                                                        <% } %>
                                                                        <!-- <li>Product Name X 1 <span>$329 </span></li> -->
                                                                        <%}) %>
                                                </ul>
                                            </div>
                                            <div class="your-order-info order-subtotal">
                                                <ul>
                                                    <li>Subtotal <span id="totalValue">₹ <%=parseInt(Total) %>.00
                                                        </span></li>
                                                </ul>
                                            </div>
                                            <div class="your-order-info order-subtotal">
                                                <ul>
                                                    <li>Discount Price: <span id="discountAmountSpan">₹ <%=0 %>.00
                                                        </span></li>
                                                </ul>
                                            </div>
                                            <div class="your-order-info order-total">
                                                <ul>
                                                    <li>Total <span id="totalSpan">₹ <%=parseInt(Total)%>.00 </span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="payment-method">
                                            <!-- <h5>Payment Info</h5> -->
                                            <div class="p-2">
                                                <div>
                                                    <h5 class="font-size-14 mb-3">Payment method :</h5>

                                                    <div class="row p-4">
                                                        <% if(wallet?.balance>=Total) {%>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="radio"
                                                                    name="payment" id="wallet" value="wallet">
                                                                <label class="form-check-label" for="flexRadioDefault1">
                                                                    Wallet Amount
                                                                </label>
                                                            </div>
                                                            <%}%>
                                                                <% if(Total>1000){ %>
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="payment" value="Cash on Delivery"
                                                                            id="COD">
                                                                        <label class="form-check-label"
                                                                            for="flexRadioDefault2">
                                                                            Cash on Delivery
                                                                        </label>
                                                                    </div>

                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="payment" value="UPI" id="online"
                                                                            checked>
                                                                        <label class="form-check-label"
                                                                            for="flexRadioDefault2">
                                                                            UPI
                                                                        </label>
                                                                    </div>
                                                                    <% }else{ %>
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="payment" value="UPI" id="online"
                                                                                checked>
                                                                            <label class="form-check-label"
                                                                                for="flexRadioDefault2">
                                                                                UPI
                                                                            </label>
                                                                        </div>
                                                                        <%}%>
                                                    </div>





                                                </div>
                                            </div>

                                        </div>

                                        <div class="condition-wrap">
                                            <p>Your personal data will be used to process your order, support your
                                                experience throughout this website, and for other purposes described in
                                                our <a href="#">privacy policy</a></p>
                                            <div class="condition-form mb-25">
                                                <input type="checkbox">
                                                <span>I have read and agree to the website <a href="#">terms and
                                                        conditions</a><span class="star">*</span></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-center text-bg-danger text-white col-md-8"
                                        style="background-color: black;">
                                        <%= locals.msg %>
                                    </div>
                                    
                                    
                                     

                                                
                                    <div class="Place-order mt-30">
                                        
                                        <!-- <a href="#" id="placeOrderBtn">Place Order</a> -->
                                        <% console.log(isStock,'oooooo'); %>
                                        <% if (isStock===false) { %>
                                            <button class="btn btn-dark btn-hover" id="placeOrderBtn" type="button"
                                            onclick="Submit(getTotalAmount() ,'<%= check.clientId %>')"
                                            style="border-radius: 0 !important; height: 2rem;">Place Order</button>
                                            <%}else{%>
                                                <button class="btn btn-dark btn-hover" id="placeOrderBtn" type="button"
                                                onclick="stockOut()"
                                                style="border-radius: 0 !important; height: 2rem;">Place Order</button>  
                                                <%}%>
                                    </div>
                                    
                                    <input type="hidden" name="total" value="<%=parseInt(Total)%>">
                                    <input type="hidden" id="status" name="status">

                            </form>


                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
    </div>
    <!-- checkout end -->
    <footer class="footer-area section-padding-1 border-top-3">
        <div class="container-fluid">
            <div class="footer-top pt-100 pb-60">
                <div class="row">
                    <div class="footer-column footer-width-24">
                        <div class="footer-widget footer-about mb-30">
                            <a href="index.html">
                                <img src="asset/images/logo/logo.png" alt="logo">
                            </a>
                            <p>Lorem ipsum dolor sit amet, magna habemus ius ad, qui minimum voluptar</p>
                            <div class="social-icon-style-2 social-icon-hm4">
                                <a class="facebook" href="#"><i class="fa fa-facebook"></i></a>
                                <a class="twitter" href="#"><i class="fa fa-twitter"></i></a>
                                <a class="youtube" href="#"><i class="fa fa-youtube"></i></a>
                                <a class="dribbble" href="#"><i class="fa fa-dribbble"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="footer-column footer-width-12">
                        <div class="footer-widget footer-info-list-2 mb-30">
                            <h3 class="footer-title">Company Link</h3>
                            <ul>
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">Help Center</a></li>
                                <li><a href="#">Our Team</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">The Blog</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-column footer-width-14">
                        <div class="footer-widget footer-info-list-2 mb-30">
                            <h3 class="footer-title">Userful Link</h3>
                            <ul>
                                <li><a href="#">Guides & Articles</a></li>
                                <li><a href="#">Customer Reviews</a></li>
                                <li><a href="#">Coupon Codes</a></li>
                                <li><a href="#">Military Discount</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-column footer-width-19">
                        <div class="footer-widget footer-info-list-2 footer-contect mb-30">
                            <h3 class="footer-title">Contact info</h3>
                            <ul>
                                <li><i class="dlicon ui-2_time-clock"></i> Monday - Friday: 9:00 - 19:00</li>
                                <li><i class="dlicon ui-1_email-83"></i> info@example.com</li>
                                <li><i class="dlicon tech-2_rotate"></i> (+612) 2531 5600</li>
                                <li><i class="dlicon ui-1_home-simple"></i> PO Box 1622 Colins Street West Victoria 8077
                                    Australia</li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-column footer-width-29 mb-30">
                        <div class="contact-page-map">
                            <div id="contact-map">
                                <iframe
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3151.838709675939!2d144.95320007668528!3d-37.817246734238516!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6ad65d4dd5a05d97%3A0x3e64f855a564844d!2s121%20King%20St%2C%20Melbourne%20VIC%203000%2C%20Australia!5e0!3m2!1sen!2sus!4v1670477011653!5m2!1sen!2sus"
                                    style="border:0;width:100%;height:100%;" allowfullscreen="" loading="lazy"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-botoom">
                <div class="row">
                    <div class="col-12">
                        <div class="copyright-2 text-center">
                            <p>© 2021 <a href="https://hasthemes.com/">Toro.</a> All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- <div class="support-lists">
        <ul>
            <li><a href="#"><i class="dlicon ui-3_chat-46"></i></a></li>
            <li><a href="#"><i class=" dlicon ui-3_phone"></i></a></li>
            <li><a href="#"><i class="dlicon ui-1_email-85"></i></a></li>
        </ul>
    </div> -->

    </div>
    <style>
        .swal2-toast {
            background-color: #31363F;
            /* Background color */
            color: #fff;
            /* Text color */
            border-radius: 10px;
            /* Border radius */
            border: none;
            /* Remove border */
            box-shadow: none;
            /* Remove box shadow */
        }

        .swal2-title {
            font-size: 14px;
            /* Title font size */
        }



        .addre:hover {
            background-color: red;
        }
    </style>
    <!-- All JS is here
============================================ -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <script>
//qty check
function stockOut(){ 
    const Toast = Swal.mixin({
        toast: true,
        position: "bottom",
        showConfirmButton: false,
        timer: 2000,
        customClass: {
          popup: 'swal-toast',
          title: 'swal-toast-title'
        },
        didOpen: (toast) => {
          toast.style.backgroundColor = "black";
          toast.style.color = "white"; 
          toast.style.fontSize = "11px"; 
        }
      });

      Toast.fire({
        text: "Item is stock out"
      });
      
}







//total
        function getTotalAmount() {
            var totalText = document.getElementById('totalSpan').innerText;
            var amount = parseFloat(totalText.replace('₹', '').replace('.00', '').trim());
            return amount;
        }







        const form = document.getElementById('orderForm');


        function Submit(amount, userId) {
            console.log(amount, userId);


            const Radio = document.querySelector('input[name="payment"]:checked');


            if (Radio.value == 'Cash on Delivery') {
                form.submit()

                const Toast = Swal.mixin({
                    toast: true,
                    position: "bottom",
                    showConfirmButton: false,
                    timer: 3000,
                    customClass: {
                        popup: 'swal-toast',
                        title: 'swal-toast-title'
                    },
                    didOpen: (toast) => {
                        toast.style.backgroundColor = "black";
                        toast.style.color = "white";
                        toast.style.fontSize = "11px";
                    }
                });

                Toast.fire({
                    text: "Order placed successfully"
                });

            } else if (Radio.value == 'wallet') {
                form.submit()

                const Toast = Swal.mixin({
                    toast: true,
                    position: "bottom",
                    showConfirmButton: false,
                    timer: 3000,
                    customClass: {
                        popup: 'swal-toast',
                        title: 'swal-toast-title'
                    },
                    didOpen: (toast) => {
                        toast.style.backgroundColor = "black";
                        toast.style.color = "white";
                        toast.style.fontSize = "11px";
                    }
                });

                Toast.fire({
                    text: "Order placed successfully"
                });
            } else {
                razor(amount, userId)
            }
        }



        const paystatus=document.getElementById('status')
        function razor(amount, userId) {
            fetch('/razorPay', {
                method: 'POST',
                headers: { 'Content-type': 'application/json' },
                body: JSON.stringify({ amount, userId })
            }).then(res => res.json()).then(data => {
                if (data.succes) {
                    console.log(data,'data');
                    let options = {
                        "key": `${data.key_id}`,
                        "amount": ` ${data.amount}`,
                        "currency": "INR",
                        "name": "Better Buys",
                        "order_id": `${data.order_id}`,
                        "handler": function (response) {
                            console.log(response,'response');
                            paystatus.value="Paid"
                            console.log(paystatus.value,'paystatus.value');
                            form.submit();
                            document.getElementById('paymentForm').submit();
                            


                            const Toast = Swal.mixin({
                                toast: true,
                                position: "bottom",
                                showConfirmButton: false,
                                timer: 1500,
                                customClass: {
                                    popup: 'swal-toast',
                                    title: 'swal-toast-title'
                                },
                                didOpen: (toast) => {
                                    toast.style.backgroundColor = "black";
                                    toast.style.color = "white";
                                    toast.style.fontSize = "11px";
                                }
                            });

                            Toast.fire({
                                text: "Order placed successfully"
                            });




                        },
                        "profile": {
                            "name": `${data.FullName}`,
                            "email": `${data.email}`
                        }
                    }

                    let razorpayObject = new Razorpay(options);
                    razorpayObject.on('payment.failed', (response) => {
                        // console.log(response,'response');
                        // alert('payment failed');
                        paystatus.value="Pending"
                        console.log(paystatus.value,'paystatus.value');
                        form.submit();
                        const Toast = Swal.mixin({
                            toast: true,
                            position: "bottom",
                            showConfirmButton: false,
                            timer: 1500,
                            customClass: {
                                popup: 'swal-toast',
                                title: 'swal-toast-title'
                            },
                            didOpen: (toast) => {
                                toast.style.backgroundColor = "black";
                                toast.style.color = "white";
                                toast.style.fontSize = "11px";
                            }
                        });

                        Toast.fire({
                            text: "Payment failed"
                        });
                    });
                    razorpayObject.open();

                } else if (data.fail) {
                    const Toast = Swal.mixin({
                        toast: true,
                        position: "bottom",
                        showConfirmButton: false,
                        timer: 2000,
                        customClass: {
                            popup: 'swal-toast',
                            title: 'swal-toast-title'
                        },
                        didOpen: (toast) => {
                            toast.style.backgroundColor = "black";
                            toast.style.color = "white";
                            toast.style.fontSize = "11px";
                        }
                    });

                    Toast.fire({
                        text: "provide valid address"
                    });
                }
            })
        }






        function selectAddress(select) {
            fetch('/selectAddress', {
                method: "post",
                headers: {
                    'Content-Type': 'application/json'

                }, body: JSON.stringify({ select })
            })
            window.location.href = '/checkOut'
        }





        const currentName = document.getElementById('name')
        const currentMobile = document.getElementById('mobile')
        const currentEmail = document.getElementById('email')
        const currentPincode = document.getElementById('pincode')
        const currentLocality = document.getElementById('locality')
        const currentAddress = document.getElementById('address')
        const currentCity = document.getElementById('city')
        const currentState = document.getElementById('state')
        const currentId = document.getElementById('id')

        function editAddress(id) {


            fetch('/editCheckoutAddress', {
                method: "post",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ id })
            })
                .then((res) => res.json())
                .then((data) => {
                    const { name, mobile, email, pincode, locality, addressData, city, state, _id } = data.edit.address[0]
                    currentName.value = name,
                        currentMobile.value = mobile,
                        currentEmail.value = email,
                        currentPincode.value = pincode,
                        currentLocality.value = locality,
                        currentAddress.value = addressData,
                        currentCity.value = city,
                        currentState.value = state,
                        currentId.value = _id

                })
        }



        function stockout(){
            const Toast = Swal.mixin({
                            toast: true,
                            position: "bottom",
                            showConfirmButton: false,
                            timer: 1500,
                            customClass: {
                                popup: 'swal-toast',
                                title: 'swal-toast-title'
                            },
                            didOpen: (toast) => {
                                toast.style.backgroundColor = "black";
                                toast.style.color = "white";
                                toast.style.fontSize = "11px";
                            }
                        });

                        Toast.fire({
                            text: "Item stock out"
                        });
        }


        //validate address form for first user
           
document.getElementById('name3').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('firstNameError3');
    const submitBtn = document.getElementById('submitBtn3');


    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid Name';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});



document.getElementById('mobile3').addEventListener('input', function(event) {
    const mobile = this.value.trim();
    const mobileRegex = /^\d{10}$/;
    const mobileError = document.getElementById('mobileError3');
    const submitBtn = document.getElementById('submitBtn3');

    if (!mobileRegex.test(mobile)) {
        mobileError.textContent = 'Invalid Mobile';
        submitBtn.disabled = true;
    } else {
        mobileError.textContent = '';
        submitBtn.disabled = false;
    }
});



document.getElementById('email3').addEventListener('input', function(event) {
    const email = this.value.trim();
    const emailRegex = /^[A-Za-z0-9.%+-]+@gmail\.com$/;
    const emailError = document.getElementById('emailError3');
    const submitBtn = document.getElementById('submitBtn3');

    if (!emailRegex.test(email)) {
        emailError.textContent = 'Invalid Email';
        submitBtn.disabled = true;
    } else {
        emailError.textContent = '';
        submitBtn.disabled = false;
    }
});



document.getElementById('pincode3').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[0-9]{6}$/;
    const firstNameError = document.getElementById('pinError3');
    const submitBtn = document.getElementById('submitBtn3');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid Zip';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});



document.getElementById('locality3').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('localError3');
    const submitBtn = document.getElementById('submitBtn3');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});



document.getElementById('address3').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('addressError3');
    const submitBtn = document.getElementById('submitBtn3');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});




document.getElementById('city3').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('cityError3');
    const submitBtn = document.getElementById('submitBtn3');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});



document.getElementById('state3').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('stateError3');
    const submitBtn = document.getElementById('submitBtn3');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});








//validate edit address
    function editName(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('firstNameError');
    const submitBtn = document.getElementById('submitBtn');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid Name';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = '';
        submitBtn.disabled = false;
    }
}



function editMobile(tag) {
    const mobile = tag.value.trim();
    const mobileRegex = /^\d{10}$/;
    const mobileError = document.getElementById('mobileError');
    const submitBtn = document.getElementById('submitBtn');

    if (!mobileRegex.test(mobile)) {
        mobileError.textContent = 'Invalid Mobile';
        submitBtn.disabled = true;
    } else {
        mobileError.textContent = '';
        submitBtn.disabled = false;
    }
};



function editEmail(tag) {
    const email = tag.value.trim();
    const emailRegex = /^[A-Za-z0-9.%+-]+@gmail\.com$/;
    const emailError = document.getElementById('emailError');
    const submitBtn = document.getElementById('submitBtn');

    if (!emailRegex.test(email)) {
        emailError.textContent = 'Invalid Email';
        submitBtn.disabled = true;
    } else {
        emailError.textContent = '';
        submitBtn.disabled = false;
    }
};



function editPin(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[0-9]{6}$/;
    const firstNameError = document.getElementById('pinError');
    const submitBtn = document.getElementById('submitBtn');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid Zip';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};



function editLocal(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('localError');
    const submitBtn = document.getElementById('submitBtn');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};



document.getElementById('address').addEventListener('input', function(event) {
    const firstName = this.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('addressError');
    const submitBtn = document.getElementById('submitBtn');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
});




function editCity(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('cityError');
    const submitBtn = document.getElementById('submitBtn');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};


function editState(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('stateError');
    const submitBtn = document.getElementById('submitBtn');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};





//validate add address form

   
function addName(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('firstNameError1');
    const submitBtn = document.getElementById('submitBtn1');


    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid Name';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};



function addMobile(tag) {
    const mobile = tag.value.trim();
    const mobileRegex = /^\d{10}$/;
    const mobileError = document.getElementById('mobileError1');
    const submitBtn = document.getElementById('submitBtn1');

    if (!mobileRegex.test(mobile)) {
        mobileError.textContent = 'Invalid Mobile';
        submitBtn.disabled = true;
    } else {
        mobileError.textContent = '';
        submitBtn.disabled = false;
    }
};



function addMail(tag) {
    const email = tag.value.trim();
    const emailRegex = /^[A-Za-z0-9.%+-]+@gmail\.com$/;
    const emailError = document.getElementById('emailError1');
    const submitBtn = document.getElementById('submitBtn1');

    if (!emailRegex.test(email)) {
        emailError.textContent = 'Invalid Email';
        submitBtn.disabled = true;
    } else {
        emailError.textContent = '';
        submitBtn.disabled = false;
    }
};



function addPin(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[0-9]{6}$/;
    const firstNameError = document.getElementById('pinError1');
    const submitBtn = document.getElementById('submitBtn1');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid Zip';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};



function addLocal(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('localError1');
    const submitBtn = document.getElementById('submitBtn1');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};



function addAddress(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('addressError1');
    const submitBtn = document.getElementById('submitBtn1');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};




function addCity(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('cityError1');
    const submitBtn = document.getElementById('submitBtn1');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};



function addState(tag) {
    const firstName = tag.value.trim();
    const firstNameRegex = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
    const firstNameError = document.getElementById('stateError1');
    const submitBtn = document.getElementById('submitBtn1');

    
    if (!firstNameRegex.test(firstName)) {
        firstNameError.textContent = 'Invalid';
        submitBtn.disabled = true;
    } else {
        firstNameError.textContent = ''; 
        submitBtn.disabled = false;
    }
};






        //to get coupen Id

        function apply() {


            var couponValue = document.querySelector(".coupen").value;

            console.log(couponValue, "coupen");

            var totalValue = document.getElementById("totalValue").innerText;
            var subTotal = totalValue.replace("₹", "").replace(".00", "");
            console.log(subTotal)
            var data = subTotal

            fetch('/applyCoupen', {
                method: "post",
                headers: {
                    'Content-Type': 'application/json'

                }, body: JSON.stringify({ coupen: couponValue, data })
            }).then((data) => (data.json()))
                .then((data) => {
                    console.log(data.coupenId, data.discountAmount, data.Total)


                    document.getElementById("discountAmountSpan").textContent = "₹ " + data.discountAmount + '.00';
                    document.getElementById("totalSpan").textContent = "₹ " + data.Total + '.00';
                })

            var button = document.getElementById("couponButton");
            var input = document.getElementById("couponInput");
            if (button.value === "Apply Coupon") {
                button.value = "Clear";
            } else {
                input.value = "";
                button.value = "Apply Coupon";
            }
        }

    </script>
    <!-- Modernizer JS -->
    <script src="asset/js/vendor/modernizr-3.11.7.min.js"></script>
    <!-- jquery -->
    <script src="asset/js/vendor/jquery-v3.6.0.min.js"></script>
    <!-- Popper JS -->
    <script src="asset/js/vendor/popper.js"></script>
    <!-- Bootstrap JS -->
    <script src="asset/js/vendor/bootstrap.min.js"></script>
    <script src="asset/js/plugins/owl-carousel.js"></script>
    <script src="asset/js/plugins/slick.js"></script>
    <script src="asset/js/plugins/jarallax.min.js"></script>
    <script src="asset/js/plugins/countdown.js"></script>
    <script src="asset/js/plugins/magnific-popup.js"></script>
    <script src="asset/js/plugins/instafeed.js"></script>
    <script src="asset/js/plugins/tilt.js"></script>
    <script src="asset/js/plugins/images-loaded.js"></script>
    <script src="asset/js/plugins/isotope.js"></script>
    <script src="asset/js/plugins/scrolloverflow-fullpage.js"></script>
    <script src="asset/js/plugins/fullpage.js"></script>
    <script src="asset/js/plugins/jquery-ui.js"></script>
    <script src="asset/js/plugins/jquery-ui-touch-punch.js"></script>
    <script src="asset/js/plugins/easyzoom.js"></script>
    <script src="asset/js/plugins/resizesensor.js"></script>
    <script src="asset/js/plugins/sticky-sidebar.js"></script>
    <script src="asset/js/plugins/scrollup.js"></script>
    <script src="asset/js/plugins/select2.min.js"></script>
    <script src="asset/js/plugins/cookie.js"></script>
    <script src="asset/js/plugins/bpopup.js"></script>
    <script src="asset/js/plugins/wow.js"></script>
    <script src="asset/js/plugins/ajax-mail.js"></script>
    <!-- Main JS -->
    <script src="asset/js/main.js"></script>



    </body>


    <!-- Mirrored from htmldemo.net/toro/toro/checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 02 Mar 2024 15:22:33 GMT -->

    </html>